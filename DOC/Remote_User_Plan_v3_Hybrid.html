<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•˜ì´ë¸Œë¦¬ë“œ ë„¤íŠ¸ì›Œí¬ ë™ê¸°í™” ì‹œìŠ¤í…œ ê³„íš</title>
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --accent-blue: #58a6ff;
            --accent-green: #3fb950;
            --accent-red: #f85149;
            --accent-purple: #a371f7;
            --accent-orange: #d29922;
            --border-color: #30363d;
        }

        body {
            font-family: 'Segoe UI', -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            color: var(--accent-orange);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        h2 {
            color: var(--accent-blue);
            margin-top: 2rem;
            border-left: 4px solid var(--accent-blue);
            padding-left: 1rem;
        }

        h3 {
            color: var(--accent-green);
            margin-top: 1.5rem;
        }

        .box {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .mode-switch {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }

        .mode-card {
            background: rgba(22, 27, 34, 0.8);
            border: 1px solid var(--border-color);
            padding: 1rem;
            border-radius: 8px;
        }

        .mode-card h4 {
            margin-top: 0;
            color: var(--text-primary);
        }

        code {
            background: rgba(110, 118, 129, 0.4);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: monospace;
            color: #d2a8ff;
        }

        pre {
            background: #0d1117;
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            border: 1px solid var(--border-color);
        }
    </style>
</head>

<body>

    <h1>ğŸŒ í•˜ì´ë¸Œë¦¬ë“œ ë„¤íŠ¸ì›Œí¬ ë™ê¸°í™” ì‹œìŠ¤í…œ ê³„íš</h1>
    <p><strong>Goal:</strong> í•„ë“œ(TCP/ìì²´ì„œë²„)ì™€ ë˜ì „(UDP/ë°ë””ì¼€ì´í‹°ë“œ ì„œë²„)ì„ ììœ ë¡­ê²Œ ì˜¤ê°€ëŠ” ìœ ì—°í•œ ìºë¦­í„° ì‹œìŠ¤í…œ êµ¬ì¶•</p>

    <div class="box">
        <h3>ğŸ’¡ í•µì‹¬ ì „ëµ: "Driver Switching"</h3>
        <p>
            ìºë¦­í„°(Actor)ì˜ ì›€ì§ì„ì„ ì œì–´í•˜ëŠ” ì£¼ì²´(Driver)ë¥¼ ëŸ°íƒ€ì„ì— êµì²´í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.
            ìƒí™©ì— ë”°ë¼ <strong>ì–¸ë¦¬ì–¼ ì—”ì§„ì˜ ë‚´ì¥ Replication</strong>ê³¼ <strong>ì»¤ìŠ¤í…€ ë³´ê°„ ì»´í¬ë„ŒíŠ¸</strong> ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬ í™œì„±í™”í•©ë‹ˆë‹¤.
        </p>
    </div>

    <div class="mode-switch">
        <div class="mode-card" style="border-top: 3px solid var(--accent-blue);">
            <h4>ğŸ—ï¸ Mode A: TCP Field (Custom)</h4>
            <ul>
                <li><strong>ì„œë²„:</strong> ìì²´ C++ ì„œë²„ / ì›¹ ì„œë²„</li>
                <li><strong>í†µì‹ :</strong> TCP íŒ¨í‚· (GsNetworkManager)</li>
                <li><strong>ì œì–´:</strong> <code>GsNetworkMovementComponent</code> í™œì„±í™”</li>
                <li><strong>Movement:</strong> <code>ReplicateMovement = false</code></li>
                <li><strong>íŠ¹ì§•:</strong> ëŒ€ê·œëª¨ ì¸ì›, ì±„íŒ…, ë¹„ì „íˆ¬ êµ¬ì—­ íš¨ìœ¨ì </li>
            </ul>
        </div>
        <div class="mode-card" style="border-top: 3px solid var(--accent-red);">
            <h4>âš”ï¸ Mode B: UDP Dungeon (UE5)</h4>
            <ul>
                <li><strong>ì„œë²„:</strong> UE5 Dedicated Server</li>
                <li><strong>í†µì‹ :</strong> UE5 Replication (Property)</li>
                <li><strong>ì œì–´:</strong> Engine Built-in SimulatedProxy</li>
                <li><strong>Movement:</strong> <code>ReplicateMovement = true</code></li>
                <li><strong>íŠ¹ì§•:</strong> ì •êµí•œ ë¬¼ë¦¬, ë¹ ë¥¸ ì „íˆ¬ ë°˜ì‘, ë³´ì•ˆ</li>
            </ul>
        </div>
    </div>

    <h2>1. í´ë˜ìŠ¤ ì„¤ê³„ ë³€ê²½ (<code>ARdRemoteCharacter</code>)</h2>

    <p>í•˜ë‚˜ì˜ ìºë¦­í„° í´ë˜ìŠ¤ê°€ ë‘ ëª¨ë“œë¥¼ ëª¨ë‘ ì§€ì›í•´ì•¼ í•©ë‹ˆë‹¤.</p>

    <pre><code class="cpp">UCLASS()
class ARdRemoteCharacter : public ARdGameCharacter 
{
    GENERATED_BODY()

public:
    // ë„¤íŠ¸ì›Œí¬ ëª¨ë“œ ì—´ê±°í˜•
    enum class ENetworkDriverMode {
        None,
        CustomTCP,  // í•„ë“œ (ìì²´ ë™ê¸°í™”)
        UnrealUDP   // ë˜ì „ (ì–¸ë¦¬ì–¼ ë¦¬í”Œë¦¬ì¼€ì´ì…˜)
    };

    // ëª¨ë“œ ì „í™˜ í•¨ìˆ˜
    void SetNetworkDriverMode(ENetworkDriverMode NewMode);

protected:
    // ì»¤ìŠ¤í…€ ë™ê¸°í™” ì»´í¬ë„ŒíŠ¸ (TCPìš©)
    UPROPERTY(VisibleAnywhere)
    class UGsNetworkMovementComponent* CustomMoveComp;

    virtual void BeginPlay() override;
};</code></pre>

    <h2>2. ëª¨ë“œ ì „í™˜ ë¡œì§ êµ¬í˜„</h2>

    <pre><code class="cpp">void ARdRemoteCharacter::SetNetworkDriverMode(ENetworkDriverMode NewMode)
{
    switch (NewMode)
    {
    case ENetworkDriverMode::CustomTCP:
        // 1. ì–¸ë¦¬ì–¼ ë¦¬í”Œë¦¬ì¼€ì´ì…˜ ë„ê¸°
        SetReplicates(false); 
        SetReplicateMovement(false);
        
        // 2. ì»¤ìŠ¤í…€ ì»´í¬ë„ŒíŠ¸ ì¼œê¸°
        CustomMoveComp->SetComponentTickEnabled(true);
        CustomMoveComp->Activate(true);
        break;

    case ENetworkDriverMode::UnrealUDP:
        // 1. ì»¤ìŠ¤í…€ ì»´í¬ë„ŒíŠ¸ ë„ê¸°
        CustomMoveComp->SetComponentTickEnabled(false);
        CustomMoveComp->Deactivate();

        // 2. ì–¸ë¦¬ì–¼ ë¦¬í”Œë¦¬ì¼€ì´ì…˜ ì¼œê¸°
        SetReplicates(true);
        SetReplicateMovement(true);
        break;
    }
}</code></pre>

    <h2>3. GsNetworkMovementComponent ì—­í•  (TCP ëª¨ë“œìš©)</h2>
    <p>ì´ ì»´í¬ë„ŒíŠ¸ëŠ” <strong>TCP ëª¨ë“œì¼ ë•Œë§Œ ë™ì‘</strong>í•˜ë©°, ì–¸ë¦¬ì–¼ ë¦¬í”Œë¦¬ì¼€ì´ì…˜ì´ êº¼ì§„ ìƒíƒœì—ì„œ ìˆ˜ë™ìœ¼ë¡œ <code>SimulatedProxy</code> ì—­í• ì„ ëŒ€ì‹ í•©ë‹ˆë‹¤.</p>
    <ul>
        <li><code>StartLocation</code>, <code>TargetLocation</code> ë³´ê°„</li>
        <li><code>Velocity</code> ì£¼ì… (ì• ë‹ˆë©”ì´ì…˜ ìš©)</li>
        <li><code>CharacterMovementComponent</code> ì„¤ì •ì„ <code>MOVE_Custom</code>ì´ë‚˜ <code>MOVE_Flying</code> ë“±ìœ¼ë¡œ ê°•ì œ ì¡°ì • ê°€ëŠ¥
        </li>
    </ul>

    <h2>4. êµ¬í˜„ ë‹¨ê³„ (Roadmap)</h2>

    <h3>Phase 1: ê¸°ë°˜ ë§ˆë ¨</h3>
    <ul>
        <li><code>ARdRemoteCharacter</code> í´ë˜ìŠ¤ ìƒì„±.</li>
        <li><code>GsNetworkMovementComponent</code>ê°€ <code>ARdRemoteCharacter</code>ì— ë¶€ì°©ë˜ë„ë¡ ì„¤ì •.</li>
        <li><code>SetNetworkDriverMode</code> í•¨ìˆ˜ êµ¬í˜„.</li>
    </ul>

    <h3>Phase 2: TCP ëª¨ë“œ êµ¬í˜„ (ìš°ì„ ìˆœìœ„)</h3>
    <ul>
        <li>í˜„ì¬ ê°œë°œ ì¤‘ì¸ í•„ë“œ ìƒí™©ì— ë§ì¶°, <code>CustomTCP</code> ëª¨ë“œë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •.</li>
        <li><code>GsNetworkMovementComponent</code>ì˜ ë³´ê°„ ë¡œì§ ì™„ì„±.</li>
    </ul>

    <h3>Phase 3: UDP ëª¨ë“œ í…ŒìŠ¤íŠ¸ (ì¶”í›„)</h3>
    <ul>
        <li>ë°ë””ì¼€ì´í‹°ë“œ ì„œë²„ ì—°ê²° ì‹œ ìë™ìœ¼ë¡œ <code>UnrealUDP</code> ëª¨ë“œë¡œ ì „í™˜ë˜ë„ë¡ <code>GameInstance</code>ë‚˜ <code>Level</code> ë¸”ë£¨í”„ë¦°íŠ¸ì—ì„œ
            ì²˜ë¦¬.</li>
    </ul>

</body>

</html>