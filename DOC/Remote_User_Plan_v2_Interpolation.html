<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íƒ€ ìœ ì € ìºë¦­í„° êµ¬í˜„ ê³„íš (ìˆ˜ì •ì•ˆ)</title>
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --accent-blue: #58a6ff;
            --accent-green: #3fb950;
            --accent-red: #f85149;
            --accent-purple: #a371f7;
            --border-color: #30363d;
        }

        body {
            font-family: 'Segoe UI', -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            color: var(--accent-blue);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        h2 {
            color: var(--accent-purple);
            margin-top: 2rem;
        }

        h3 {
            color: var(--text-secondary);
            margin-top: 1.5rem;
        }

        .box {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .highlight {
            color: var(--accent-green);
            font-weight: bold;
        }

        .warning {
            color: var(--accent-red);
            font-weight: bold;
        }

        code {
            background: rgba(110, 118, 129, 0.4);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: monospace;
            color: #d2a8ff;
        }

        pre {
            background: #0d1117;
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            border: 1px solid var(--border-color);
        }
    </style>
</head>

<body>

    <h1>ğŸš€ íƒ€ ìœ ì € êµ¬í˜„ ê³„íš (v2: ë³´ê°„ ë°©ì‹)</h1>
    <p><strong>ì£¼ì œ:</strong> AI ì œê±° ë° ì§ì ‘ íŠ¸ëœìŠ¤í¼ ë³´ê°„(Interpolation)ì„ í†µí•œ ë™ê¸°í™”</p>

    <div class="box">
        <h3>ğŸ’¡ í•µì‹¬ ë³€ê²½ ì‚¬í•­</h3>
        <ul>
            <li><span class="warning">ì‚­ì œ:</span> <code>ARdRemoteController</code> (AI Controller)</li>
            <li><span class="warning">ì‚­ì œ:</span> NavMesh ì˜ì¡´ì„± (ê¸¸ì°¾ê¸° ë¡œì§ ì œê±°)</li>
            <li><span class="highlight">ì¶”ê°€:</span> ìœ„ì¹˜/íšŒì „ ë³´ê°„ (Interpolation) ë¡œì§</li>
            <li><span class="highlight">ì¶”ê°€:</span> ì• ë‹ˆë©”ì´ì…˜ ì†ë„(Velocity) ì£¼ì…</li>
        </ul>
        <p>
            <strong>ì´ìœ :</strong> ë¹„í–‰, ìˆ˜ì˜, í´ë¼ì´ë° ë“± NavMeshê°€ ì—†ëŠ” ê³µê°„ì—ì„œì˜ ììœ ë¡œìš´ ì´ë™ì„ ì§€ì›í•˜ê¸° ìœ„í•´,
            ì§€ëŠ¥í˜• ì´ë™(AI) ëŒ€ì‹  <strong>ì„œë²„ ìƒíƒœ ë³µì œ(Replication)</strong> ë°©ì‹ìœ¼ë¡œ ì „í™˜í•©ë‹ˆë‹¤.
        </p>
    </div>

    <h2>1. ì‹œìŠ¤í…œ êµ¬ì¡°</h2>

    <h3>1.1 í´ë˜ìŠ¤ ì—­í• </h3>
    <ul>
        <li>
            <strong><code>ARdRemoteCharacter</code></strong> (Character ìƒì†)
            <ul>
                <li>ë¡œì»¬ í”Œë ˆì´ì–´ì™€ ì™¸í˜•ì€ ê°™ì§€ë§Œ ì…ë ¥(Input) ë° ì¹´ë©”ë¼ ë¡œì§ì´ ì œê±°ëœ ê»ë°ê¸° Actorì…ë‹ˆë‹¤.</li>
                <li>ë¬¼ë¦¬ ì¶©ëŒ(Collision)ì€ <code>Pawn</code>ì´ë‚˜ <code>CharacterMesh</code>ë§Œ ë‚¨ê¸°ê³  ë‚˜ë¨¸ì§€ëŠ” <code>NoCollision</code>
                    ì²˜ë¦¬í•˜ì—¬ ë¡œì»¬ í”Œë ˆì´ì–´ì˜ ê¸¸ë§‰ì„ ìµœì†Œí™”í•©ë‹ˆë‹¤.</li>
            </ul>
        </li>
        <li>
            <strong><code>UGsNetworkMovementComponent</code></strong> (ActorComponent)
            <ul>
                <li>ì‹¤ì§ˆì ì¸ <strong>ë™ê¸°í™” ì—”ì§„</strong>ì…ë‹ˆë‹¤.</li>
                <li>ëª©í‘œ ì§€ì (Target Location)ê³¼ í˜„ì¬ ì§€ì (Current Location) ì‚¬ì´ë¥¼ ë§¤ í”„ë ˆì„(Tick) ë¶€ë“œëŸ½ê²Œ ì´ë™ì‹œí‚µë‹ˆë‹¤.</li>
            </ul>
        </li>
    </ul>

    <h2>2. ì´ë™ ë™ê¸°í™” ì•Œê³ ë¦¬ì¦˜ (í•µì‹¬)</h2>

    <p>ë„¤íŠ¸ì›Œí¬ë¡œ ë°›ì€ ë°ì´í„°ëŠ” ê³¼ê±°ì˜ ìœ„ì¹˜ì…ë‹ˆë‹¤. ì´ë¥¼ ë¶€ë“œëŸ½ê²Œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ <strong>ì„ í˜• ë³´ê°„(Lerp)</strong>ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>

    <h3>2.1 Tick ë¡œì§ (ì˜ì‚¬ ì½”ë“œ)</h3>
    <pre><code class="cpp">void UGsNetworkMovementComponent::TickComponent(...)
{
    // 1. ë°ì´í„°ê°€ ì—†ìœ¼ë©´ íŒ¨ìŠ¤
    if (!bHasTargetData) return;

    // 2. í˜„ì¬ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°
    FVector CurrentLoc = Owner->GetActorLocation();

    // 3. ëª©í‘œ ìœ„ì¹˜ë¡œ ë¶€ë“œëŸ½ê²Œ ì´ë™ (VInterpTo ì‚¬ìš©)
    // InterpSpeedëŠ” ë„¤íŠ¸ì›Œí¬ ì§€ì—° ì‹œê°„ì— ë”°ë¼ ì¡°ì ˆí•˜ë©´ ë” ì¢‹ìŒ
    FVector NewLoc = FMath::VInterpTo(CurrentLoc, TargetLocation, DeltaTime, InterpSpeed);

    // 4. ìœ„ì¹˜ ì ìš©
    Owner->SetActorLocation(NewLoc);

    // 5. íšŒì „ ë™ê¸°í™” (RInterpTo ì‚¬ìš©)
    FRotator NewRot = FMath::RInterpTo(Owner->GetActorRotation(), TargetRotation, DeltaTime, RotInterpSpeed);
    Owner->SetActorRotation(NewRot);

    // 6. ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ ì†ë„ ì£¼ì… (ì¤‘ìš”!)
    // ì‹¤ì œ ì´ë™ ê±°ë¦¬ ê¸°ë°˜ìœ¼ë¡œ ì†ë„ ê³„ì‚°í•˜ì—¬ CharacterMovementì— ì£¼ì…í•´ì•¼ 
    // AnimBPê°€ 'ë›°ëŠ” ëª¨ì…˜'ì„ ì¬ìƒí•¨.
    FVector RealVelocity = (NewLoc - CurrentLoc) / DeltaTime;
    MovementComponent->Velocity = RealVelocity;
}</code></pre>

    <h3>2.2 í…”ë ˆí¬íŠ¸ ì²˜ë¦¬</h3>
    <p>ë„¤íŠ¸ì›Œí¬ ë ‰ìœ¼ë¡œ ì¸í•´ í˜„ì¬ ìœ„ì¹˜ì™€ ëª©í‘œ ìœ„ì¹˜ê°€ ë„ˆë¬´ ë©€ì–´ì§€ë©´(ì˜ˆ: 5ë¯¸í„° ì´ìƒ), ë³´ê°„í•˜ì§€ ì•Šê³  <strong>ì¦‰ì‹œ ì´ë™(Teleport)</strong>ì‹œì¼œì•¼ ë§µ ëš«ìŒ í˜„ìƒì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </p>

    <h2>3. íŠ¹ìˆ˜ ìƒíƒœ ë™ê¸°í™” (í™•ì¥ ê³ ë ¤)</h2>
    <p>ë¹„í–‰, í´ë¼ì´ë° ë“±ì„ ìœ„í•´ <code>Packet</code> êµ¬ì¡°ì²´ì— <code>MovementMode</code> í•„ë“œ ì¶”ê°€ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.</p>

    <pre><code class="cpp">// ì„œë²„ì—ì„œ ì˜¬ ë•Œ
struct FPacketMove {
    FVector Location;
    FRotator Rotation;
    FVector Velocity;
    uint8 MovementMode; // 0:Walk, 1:Fall, 2:Swim, 3:Fly, 4:Climb
};

// í´ë¼ì´ì–¸íŠ¸ ì ìš© ì‹œ
if (ReceivedMode == MOVE_Flying) {
    CharacterMovement->SetMovementMode(MOVE_Flying);
}</code></pre>

    <h2>4. ì‘ì—… ìˆœì„œ</h2>
    <ol>
        <li><strong><code>ARdRemoteCharacter</code> í´ë˜ìŠ¤ ìƒì„±</strong>
            <ul>
                <li><code>ARdGameCharacter</code> ë³µì‚¬ í˜¹ì€ ìƒì†.</li>
                <li>Camera, Input ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ ì œê±°.</li>
            </ul>
        </li>
        <li><strong><code>GsNetworkMovementComponent</code> ë³´ê°„ ë¡œì§ êµ¬í˜„</strong>
            <ul>
                <li><code>TickComponent</code> í™œì„±í™”.</li>
                <li><code>VInterpTo</code> ë¡œì§ ì‘ì„±.</li>
            </ul>
        </li>
        <li><strong><code>GsNetworkManager</code> ìŠ¤í° ë¡œì§ ì—°ê²°</strong>
            <ul>
                <li>ìœ ì € ì…ì¥ íŒ¨í‚· ìˆ˜ì‹  ì‹œ <code>ARdRemoteCharacter</code> ìŠ¤í°.</li>
                <li>ì´ë™ íŒ¨í‚· ìˆ˜ì‹  ì‹œ í•´ë‹¹ ìºë¦­í„°ì˜ ì»´í¬ë„ŒíŠ¸ì— ë°ì´í„° ì „ë‹¬.</li>
            </ul>
        </li>
    </ol>

</body>

</html>