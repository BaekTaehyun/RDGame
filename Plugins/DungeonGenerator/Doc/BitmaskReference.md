# BSP Wall Bitmask Configurations
## Unreal Coordinate System (Corrected)

**좌표계 (위에서 내려다볼 때):**

```
                 Y+ (North/위)
                     ↑
                     │
    X+ (West/왼쪽) ←─┼─→ X- (East/오른쪽)
                     │
                     ↓
                 Y- (South/아래)
```

**비트마스크 인코딩:**
| Bit | Value | Direction | Unreal Axis | 화면 방향 |
|-----|-------|-----------|-------------|-----------|
| 0   | 1     | North (N) | Y+          | 위쪽      |
| 1   | 2     | East (E)  | X-          | 오른쪽    |
| 2   | 4     | South (S) | Y-          | 아래쪽    |
| 3   | 8     | West (W)  | X+          | 왼쪽      |

---

## 16 Tile Configurations (0-15)

### Row 1: Masks 0-3

```
┌───────────────┬───────────────┬───────────────┬───────────────┐
│   0 (0000)    │   1 (0001)    │   2 (0010)    │   3 (0011)    │
│   Isolated    │    North      │    East       │   N + E       │
│               │               │               │               │
│    ┌───┐      │    ┌─┬─┐      │    ┌───┐      │    ┌─┬─┐      │
│    │ ■ │      │    │ ■ │      │    │ ■ ├──→   │    │ ■ ├──→   │
│    └───┘      │    └───┘      │    └───┘      │    └───┘      │
│               │      ↑        │               │      ↑        │
│               │     Y+        │      →X-      │    Y+ & X-    │
└───────────────┴───────────────┴───────────────┴───────────────┘
```

### Row 2: Masks 4-7

```
┌───────────────┬───────────────┬───────────────┬───────────────┐
│   4 (0100)    │   5 (0101)    │   6 (0110)    │   7 (0111)    │
│    South      │    N + S      │    E + S      │   N + E + S   │
│               │      ↑        │               │      ↑        │
│    ┌───┐      │    ┌─┬─┐      │    ┌───┐      │    ┌─┬─┐      │
│    │ ■ │      │    │ ■ │      │    │ ■ ├──→   │    │ ■ ├──→   │
│    └─┬─┘      │    └─┬─┘      │    └─┬─┘      │    └─┬─┘      │
│      ↓        │      ↓        │      ↓        │      ↓        │
│     Y-        │   Vertical    │               │    T-shape    │
└───────────────┴───────────────┴───────────────┴───────────────┘
```

### Row 3: Masks 8-11

```
┌───────────────┬───────────────┬───────────────┬───────────────┐
│   8 (1000)    │   9 (1001)    │  10 (1010)    │  11 (1011)    │
│    West       │    N + W      │    E + W      │   N + E + W   │
│               │      ↑        │               │      ↑        │
│    ┌───┐      │    ┌─┬─┐      │    ┌───┐      │    ┌─┬─┐      │
│ ←──┤ ■ │      │ ←──┤ ■ │      │ ←──┤ ■ ├──→   │ ←──┤ ■ ├──→   │
│    └───┘      │    └───┘      │    └───┘      │    └───┘      │
│     X+        │               │  Horizontal   │    T-shape    │
└───────────────┴───────────────┴───────────────┴───────────────┘
```

### Row 4: Masks 12-15

```
┌───────────────┬───────────────┬───────────────┬───────────────┐
│  12 (1100)    │  13 (1101)    │  14 (1110)    │  15 (1111)    │
│    S + W      │   N + S + W   │   E + S + W   │   All (NESW)  │
│               │      ↑        │               │      ↑        │
│    ┌───┐      │    ┌─┬─┐      │    ┌───┐      │    ┌─┬─┐      │
│ ←──┤ ■ │      │ ←──┤ ■ │      │ ←──┤ ■ ├──→   │ ←──┤ ■ ├──→   │
│    └─┬─┘      │    └─┬─┘      │    └─┬─┘      │    └─┬─┘      │
│      ↓        │      ↓        │      ↓        │      ↓        │
│               │   Vertical    │    T-shape    │    Cross      │
└───────────────┴───────────────┴───────────────┴───────────────┘
```

---

## Summary Table

| Mask | Binary | Directions | 화면 확장 방향 | Description |
|------|--------|------------|----------------|-------------|
| 0    | 0000   | None       | 없음           | 고립된 블록 |
| 1    | 0001   | N          | ↑              | 북쪽 (Y+) 연결 |
| 2    | 0010   | E          | →              | 동쪽 (X-) 연결 |
| 3    | 0011   | N+E        | ↑→             | 북동 코너 |
| 4    | 0100   | S          | ↓              | 남쪽 (Y-) 연결 |
| 5    | 0101   | N+S        | ↑↓             | **세로 벽** |
| 6    | 0110   | E+S        | →↓             | 남동 코너 |
| 7    | 0111   | N+E+S      | ↑→↓            | T자 (서쪽 없음) |
| 8    | 1000   | W          | ←              | 서쪽 (X+) 연결 |
| 9    | 1001   | N+W        | ↑←             | 북서 코너 |
| 10   | 1010   | E+W        | ←→             | **가로 벽** |
| 11   | 1011   | N+E+W      | ↑←→            | T자 (남쪽 없음) |
| 12   | 1100   | S+W        | ←↓             | 남서 코너 |
| 13   | 1101   | N+S+W      | ↑←↓            | T자 (동쪽 없음) |
| 14   | 1110   | E+S+W      | ←→↓            | T자 (북쪽 없음) |
| 15   | 1111   | N+E+S+W    | ↑←→↓           | **십자 교차** |

---

## 코드 매핑 (GetWallBitmask)

```cpp
// Unreal 좌표계: Y+ = North, X+ = West, X- = East, Y- = South
if (IsWall(X, Y + 1, Grid))  Mask |= 1;  // North (Y+) - 위쪽
if (IsWall(X - 1, Y, Grid))  Mask |= 2;  // East  (X-) - 오른쪽
if (IsWall(X, Y - 1, Grid))  Mask |= 4;  // South (Y-) - 아래쪽
if (IsWall(X + 1, Y, Grid))  Mask |= 8;  // West  (X+) - 왼쪽
```

---

## 참고: Unreal 좌표계 특이점

일반적인 게임 좌표계와 달리 Unreal Engine에서는:
- **X+는 왼쪽 (West)** 입니다
- **X-는 오른쪽 (East)** 입니다

이는 위에서 내려다보는 탑다운 뷰 기준입니다.
